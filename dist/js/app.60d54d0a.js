(function(e){function t(t){for(var a,o,r=t[0],c=t[1],l=t[2],u=0,v=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&v.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(v.length)v.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},i={app:0},s=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/scan/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"08f6":function(e,t,n){"use strict";n("e5a2")},"1ebd":function(e,t,n){},3869:function(e,t,n){"use strict";n("a093")},"56d7":function(e,t,n){"use strict";n.r(t);var a=n("2b0e"),i=function(){var e=this,t=e._self._c;return t("v-app",[t("Search"),t("AppUpdateComponent")],1)},s=[],o=function(){var e=this,t=e._self._c;return t("v-container",{staticClass:"search-container"},[t("v-form",{ref:"form",staticClass:"search__form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("v-text-field",{ref:"inputText",staticClass:"search__text-field",attrs:{required:"",solo:"",dense:"",type:"text",height:42},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.Cauta.apply(null,arguments)}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),t("v-btn",{staticClass:"ml-3",attrs:{color:"primary",elevation:"2",height:"42",disabled:!e.valid},on:{click:e.search}},[e._v("Cauta")])],1),t("div",{staticStyle:{height:"1em"}},[t("span",{ref:"searchSpan"})]),e.isMobile()?t("ScannerPanel",{on:{scan:e.scan}}):e._e()],1)},r=[],c=function(){var e=this,t=e._self._c;return t("div",[e.openScanner?t("VideoDeviceSelector",{on:{change:e.onSelectedDeviceChange}}):e._e(),e.openScanner?t("Scanner",{ref:"scanner",staticClass:"pt-4",attrs:{deviceId:e.selectedDeviceId},on:{scan:e.scan,denied:e.onOpenScannerClick}}):e._e(),e.openScanner?t("v-btn",{staticClass:"scanner-button",attrs:{id:"closeScannerButton",icon:""},on:{click:e.onOpenScannerClick}},[t("CloseScannerIcon",{staticClass:"scanner-button-icon"}),t("div",{staticClass:"scanner-button-text"},[e._v("Inchide Camera")])],1):t("v-btn",{staticClass:"scanner-button",attrs:{id:"openScannerButton",icon:""},on:{click:e.onOpenScannerClick}},[t("OpenScannerIcon",{staticClass:"scanner-button-icon"}),t("div",{staticClass:"scanner-button-text"},[t("span",[e._v("Scaneaza cu Camera")])])],1)],1)},l=[],d=function(){var e=this,t=e._self._c;return t("div",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoaded,expression:"isLoaded"}],staticClass:"scanner-container"},[t("video",{ref:"scanner",attrs:{poster:"data:image/gif,AAAA"}}),t("div",{staticClass:"overlay-element"}),t("div",{staticClass:"laser"})]),t("ErrorDialog",{ref:"errorDialog"})],1)},u=[],v=n("fd05"),h=function(){var e=this,t=e._self._c;return t("v-dialog",{attrs:{persistent:"","max-width":e.dialogWidth},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("v-card",{attrs:{raised:""}},[t("v-card-title",[e._v(e._s(e.details.title)+" ")]),t("v-card-text",[e._v(e._s(e.details.description)+" ")]),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{text:"",id:"error-dialog__close-btn"},on:{click:e.closeDialog}},[e._v(e._s(e.details.buttonText))])],1)],1)],1)},p=[],f={name:"ErrorDialog",data(){return{details:{},visible:!1}},computed:{dialogWidth(){return this.isMobileView?"75%":"25%"},isMobileView(){return"xs"===this.$vuetify.breakpoint.name}},methods:{closeDialog(){this.visible=!1,this.details&&this.details.triggerButtonAction()},showDialog(e){this.details=e,this.visible=!0}}},m=f,b=n("2877"),g=Object(b["a"])(m,h,p,!1,null,null,null),w=g.exports;class y{constructor(e,t,n,a){this.title=e,this.description=t,this.buttonAction=a,this.buttonText=n}triggerButtonAction(){this.buttonAction&&"function"===typeof this.buttonAction&&this.buttonAction()}}var x=n("9ae0"),S=n.n(x);const _=new Audio(S.a);var D={name:"Scanner",components:{ErrorDialog:w},props:{deviceId:null},data(){return{cameraAvailable:null,cameraEnabled:null,isLoaded:!1,codeScanner:new v["a"],controls:null,scannedVal:null}},computed:{constraints(){return this.deviceId?{video:{deviceId:this.deviceId}}:null}},async created(){this.cameraAvailable=await this.isCameraAvailable(),this.cameraEnabled=this.cameraAvailable?await this.isCameraEnabled():null},mounted(){this.start()},beforeDestroy(){var e;null===(e=this.controls)||void 0===e||e.stop()},methods:{start(){this.constraints?(console.log(this.constraints),this.codeScanner.decodeFromConstraints(this.constraints,this.$refs.scanner,this.callback)):this.codeScanner.decodeFromVideoDevice(void 0,this.$refs.scanner,this.callback)},callback(e,t,n){this.isLoaded||(this.controls=n,this.isLoaded=!0),e&&e.text!==this.scannedVal&&(_.play(),this.scannedVal=e.text,this.$emit("scan",e.text))},async isCameraAvailable(){try{var e;const t=await(null===(e=navigator.mediaDevices)||void 0===e?void 0:e.enumerateDevices());if(t){const e=t.filter(e=>"videoinput"===e.kind);return e.length>0}return console.log("camera not available"),!1}catch(t){return console.error(t),!1}},async isCameraEnabled(){try{var e;const t=await(null===(e=navigator.permissions)||void 0===e?void 0:e.query({name:"camera"}));return console.log("camera permission: "+(null===t||void 0===t?void 0:t.state)),!t||"denied"!==t.state}catch(t){return console.error(t),!0}}},watch:{cameraAvailable(e){if(document.body.style.cursor="default",!e){const e=new y("Eroare","Nu exista Camera","Inchide",()=>{this.$emit("denied")});this.$refs.errorDialog.showDialog(e)}},cameraEnabled(e){if(document.body.style.cursor="default",!e){const e=new y("Eroare","Accesul la camera este interzis","Inchide",()=>{this.$emit("denied")});this.$refs.errorDialog.showDialog(e)}},constraints(e,t){var n;e!==t&&(this.isLoaded=!1,null===(n=this.controls)||void 0===n||n.stop(),this.start())}}},k=D,C=(n("08f6"),Object(b["a"])(k,d,u,!1,null,"249ebc28",null)),A=C.exports,O=function(){var e=this,t=e._self._c;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"}},[t("path",{attrs:{fill:"currentColor",d:"M170.666667 256h85.333333v512H170.666667V256m128 0h42.666666v512H298.666667V256m85.333333 0h128v512H384V256m170.666667 0h42.666666v512h-42.666666V256m128 0h85.333333v512h-85.333333V256m128 0h42.666666v512h-42.666666V256M85.333333 170.666667v170.666666H0V170.666667a85.333333 85.333333 0 0 1 85.333333-85.333334h170.666667v85.333334H85.333333m853.333334-85.333334a85.333333 85.333333 0 0 1 85.333333 85.333334v170.666666h-85.333333V170.666667h-170.666667V85.333333h170.666667M85.333333 682.666667v170.666666h170.666667v85.333334H85.333333a85.333333 85.333333 0 0 1-85.333333-85.333334v-170.666666h85.333333m853.333334 170.666666v-170.666666h85.333333v170.666666a85.333333 85.333333 0 0 1-85.333333 85.333334h-170.666667v-85.333334h170.666667z"}})])},V=[],E={},T=Object(b["a"])(E,O,V,!1,null,null,null),j=T.exports,I=function(){var e=this,t=e._self._c;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"}},[t("path",{attrs:{fill:"currentColor",d:"M170.666667 256h85.333333v512H170.666667V256m128 0h42.666666v512H298.666667V256m85.333333 0h128v512H384V256m170.666667 0h42.666666v512h-42.666666V256m128 0h85.333333v512h-85.333333V256m128 0h42.666666v512h-42.666666V256M85.333333 170.666667v170.666666H0V170.666667a85.333333 85.333333 0 0 1 85.333333-85.333334h170.666667v85.333334H85.333333m853.333334-85.333334a85.333333 85.333333 0 0 1 85.333333 85.333334v170.666666h-85.333333V170.666667h-170.666667V85.333333h170.666667M85.333333 682.666667v170.666666h170.666667v85.333334H85.333333a85.333333 85.333333 0 0 1-85.333333-85.333334v-170.666666h85.333333m853.333334 170.666666v-170.666666h85.333333v170.666666a85.333333 85.333333 0 0 1-85.333333 85.333334h-170.666667v-85.333334h170.666667z"}}),t("path",{attrs:{d:"M 10,10 L 1010,1010",stroke:"red","stroke-width":"150"}})])},$=[],M={},L=Object(b["a"])(M,I,$,!1,null,null,null),H=L.exports,P=function(){var e=this,t=e._self._c;return t("v-select",{directives:[{name:"show",rawName:"v-show",value:e.videoDevices.length,expression:"videoDevices.length"}],attrs:{items:e.videoDevices,placeholder:"Default","item-text":"label","item-value":"deviceId",label:"Default camera","single-line":""},on:{change:e.onChange}})},B=[],N={name:"VideoDeviceSelector",data(){return{videoDevices:[],selectedVideoDevice:null}},async created(){await this.getVideoDevices()},methods:{async getVideoDevices(){var e;const t=await(null===(e=navigator.mediaDevices)||void 0===e?void 0:e.enumerateDevices());t&&(this.videoDevices=t.filter(e=>"videoinput"===e.kind&&e.label.includes("back")))},onChange(){this.$emit("change",this.selectedVideoDevice)}}},U=N,W=Object(b["a"])(U,P,B,!1,null,"b70babf2",null),G=W.exports,K={name:"ScannerPanel",components:{OpenScannerIcon:j,CloseScannerIcon:H,Scanner:A,VideoDeviceSelector:G},data(){return{openScanner:!1,selectedDeviceId:null}},methods:{scan(e){this.$emit("scan",e)},onOpenScannerClick(){this.openScanner=!this.openScanner},onSelectedDeviceChange(e){this.selectedDeviceId=e}}},z=K,F=(n("eff2"),Object(b["a"])(z,c,l,!1,null,"71ce17d1",null)),q=F.exports,J={name:"Search",components:{ScannerPanel:q},data(){return{valid:!0,searchText:"",savedOnKeyDown:null}},mounted(){this.savedOnKeyDown=document.onkeydown,document.onkeydown=this.focusOnKeyDown},beforeRouteLeave(e,t,n){document.onkeydown=this.savedOnKeyDown,n()},methods:{isMobile(){return/Android|iPhone/i.test(navigator.userAgent)},search(){this.$refs.searchSpan.innerHTML="CAUT: "+this.searchText},scan(e){e&&(this.searchText=e)},focusOnKeyDown(){this.$refs.inputText&&this.$refs.inputText.focus()}}},R=J,Q=(n("9075"),Object(b["a"])(R,o,r,!1,null,"e4a629de",null)),X=Q.exports,Y=function(){var e=this,t=e._self._c;return t("div",[t("v-overlay",{attrs:{value:e.updateExists}}),t("v-snackbar",{attrs:{value:e.updateExists,"multi-line":!0,timeout:-1,id:"update_snackbar",color:"#FDD835"},scopedSlots:e._u([{key:"action",fn:function({attrs:n}){return[t("v-btn",e._b({attrs:{color:"black",text:""},on:{click:e.refreshApp}},"v-btn",n,!1),[e._v(" Update ")])]}}])},[e._v(" An update is available ")])],1)},Z=[],ee={name:"AppUpdateComponent",data(){return{refreshing:!1,registration:null,updateExists:!1}},created(){document.addEventListener("swUpdated",this.updateAvailable),navigator.serviceWorker.addEventListener("controllerchange",()=>{this.refreshing||(this.refreshing=!0,window.location.reload())})},methods:{updateAvailable(e){this.registration=e.detail,this.updateExists=!0},refreshApp(){this.updateExists=!1,this.registration&&this.registration.waiting&&this.registration.waiting.postMessage({type:"SKIP_WAITING"})}}},te=ee,ne=(n("3869"),Object(b["a"])(te,Y,Z,!1,null,"5506616e",null)),ae=ne.exports,ie={name:"App",components:{Search:X,AppUpdateComponent:ae}},se=ie,oe=(n("ecd2"),Object(b["a"])(se,i,s,!1,null,null,null)),re=oe.exports,ce=n("ce5b"),le=n.n(ce);n("bf40");a["default"].use(le.a);var de=new le.a({theme:{themes:{light:{primary:"#298dff",accent:"#298dff"}}}}),ue=(n("5363"),n("9483"));Object(ue["a"])("/scan/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(e){console.log(`[${(new Date).toLocaleTimeString("en-GB")}]: Service worker has been registered.`),setInterval(()=>{console.log("Checking app for updates..."),e.update().then(e=>{var t,n;console.log(`[${(new Date).toLocaleTimeString("en-GB")}]: Service Worker updated to latest version.`);const a=null!==(t=e.installing)&&void 0!==t?t:e.waiting;null!==(n=e.waiting)&&void 0!==n&&n.state&&console.log(`[${(new Date).toLocaleTimeString("en-GB")}]: Waiting service worker state: ${e.waiting.state}`),"installed"===(null===a||void 0===a?void 0:a.state)?(console.log(`[${(new Date).toLocaleTimeString("en-GB")}]: Pending update found... Refresh the app to update`),document.dispatchEvent(new CustomEvent("swUpdated",{detail:e}))):console.log(`[${(new Date).toLocaleTimeString("en-GB")}]: No new service worker available`)}).catch(e=>console.log("Service Worker update failed!",e))},6e4)},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(e){console.log("New content is available; please refresh."),document.dispatchEvent(new CustomEvent("swUpdated",{detail:e}))},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),a["default"].config.productionTip=!1,new a["default"]({vuetify:de,render:e=>e(re)}).$mount("#app")},"57c0":function(e,t,n){},9075:function(e,t,n){"use strict";n("1ebd")},"9ae0":function(e,t,n){e.exports=n.p+"media/beep.6bb58878.wav"},a093:function(e,t,n){},bcea:function(e,t,n){},e5a2:function(e,t,n){},ecd2:function(e,t,n){"use strict";n("57c0")},eff2:function(e,t,n){"use strict";n("bcea")}});
//# sourceMappingURL=app.60d54d0a.js.map