(function(e){function t(t){for(var a,s,r=t[0],c=t[1],l=t[2],u=0,v=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&v.push(i[s][0]),i[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(v.length)v.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},i={app:0},o=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/scan2/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0787":function(e,t,n){"use strict";n("6ecf")},"2bb7":function(e,t,n){"use strict";n("c1f1")},3869:function(e,t,n){"use strict";n("a093")},"4f0b":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var a=n("2b0e"),i=function(){var e=this,t=e._self._c;return t("v-app",[t("Search"),t("AppUpdateComponent")],1)},o=[],s=function(){var e=this,t=e._self._c;return t("v-container",{staticClass:"search-container"},[t("v-form",{ref:"form",staticClass:"search__form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("v-text-field",{ref:"inputText",staticClass:"search__text-field",attrs:{required:"",solo:"",dense:"",type:"text",height:42},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.Cauta.apply(null,arguments)}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),t("v-btn",{staticClass:"ml-3",attrs:{color:"primary",elevation:"2",height:"42",disabled:!e.valid},on:{click:e.search}},[e._v("Cauta")])],1),t("div",{staticStyle:{height:"1em"}},[t("span",{ref:"searchSpan"})]),e.isMobile()?t("ScannerPanel",{on:{scan:e.scan}}):e._e()],1)},r=[],c=function(){var e=this,t=e._self._c;return t("div",[t("v-select",{directives:[{name:"show",rawName:"v-show",value:e.videoDevices.length,expression:"videoDevices.length"}],attrs:{items:e.videoDevices,"item-text":"label","item-value":"deviceId",label:"Camere disponibile","return-object":"","single-line":""},model:{value:e.selectedVideoDevice,callback:function(t){e.selectedVideoDevice=t},expression:"selectedVideoDevice"}}),e.openScanner?t("Scanner",{ref:"scanner",staticClass:"pt-4",attrs:{camera:e.selectedVideoDevice},on:{scan:e.scan,denied:e.onOpenScannerClick}}):e._e(),e.openScanner?t("v-btn",{staticClass:"scanner-button",attrs:{id:"closeScannerButton",icon:""},on:{click:e.onOpenScannerClick}},[t("CloseScannerIcon",{staticClass:"scanner-button-icon"}),t("div",{staticClass:"scanner-button-text"},[e._v("Inchide Camera")])],1):t("v-btn",{staticClass:"scanner-button",attrs:{id:"openScannerButton",icon:""},on:{click:e.onOpenScannerClick}},[t("OpenScannerIcon",{staticClass:"scanner-button-icon"}),t("div",{staticClass:"scanner-button-text"},[t("span",[e._v("Scaneaza cu Camera")])])],1)],1)},l=[],d=function(){var e=this,t=e._self._c;return t("div",[t("CameraCodeScanner",{directives:[{name:"show",rawName:"v-show",value:e.isLoaded,expression:"isLoaded"}],ref:"barcodeReader",attrs:{camera:e.camera},on:{scan:e.onScan,load:e.onLoad}}),t("ErrorDialog",{ref:"errorDialog"})],1)},u=[],v=function(){var e=this,t=e._self._c;return t("div",{staticClass:"scanner-container"},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}]},[t("video",{ref:"scanner",attrs:{poster:"data:image/gif,AAAA"}}),t("div",{staticClass:"overlay-element"}),t("div",{staticClass:"laser"})])])},h=[],p=n("fd05"),f=n("224f"),m={name:"CameraCodeScanner",props:{camera:null},data(){return{isLoading:!0,codeScanner:new p["a"],controls:null}},emits:["load","scan"],mounted(){if(!this.isMediaStreamAPISupported)throw new f["Exception"]("Media Stream API is not supported");this.start()},beforeDestroy(){var e;null===(e=this.controls)||void 0===e||e.stop()},computed:{isMediaStreamAPISupported(){return navigator&&navigator.mediaDevices&&"enumerateDevices"in navigator.mediaDevices},constraints(){return{video:this.camera}}},methods:{start(){this.constraints?(console.log(this.constraints),this.codeScanner.decodeFromConstraints(this.constraints,this.$refs.scanner,this.callback)):this.codeScanner.decodeFromVideoDevice(void 0,this.$refs.scanner,this.callback)},callback(e,t,n){this.isLoading&&(this.controls=n,this.isLoading=!1,this.$emit("load",{controls:this.controls,scannerElement:this.$refs.scanner,browserMultiFormatReader:this.codeScanner})),e&&this.$emit("scan",{result:e.text,raw:e})}},watch:{camera(e,t){e!==t&&(this.isLoading=!0,this.controls.stop(),this.start())}}},g=m,b=(n("2bb7"),n("2877")),w=Object(b["a"])(g,v,h,!1,null,"27caccc0",null),y=w.exports,x=function(){var e=this,t=e._self._c;return t("v-dialog",{attrs:{persistent:"","max-width":e.dialogWidth},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("v-card",{attrs:{raised:""}},[t("v-card-title",[e._v(e._s(e.details.title)+" ")]),t("v-card-text",[e._v(e._s(e.details.description)+" ")]),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{text:"",id:"error-dialog__close-btn"},on:{click:e.closeDialog}},[e._v(e._s(e.details.buttonText))])],1)],1)],1)},S=[],D={name:"ErrorDialog",data(){return{details:{},visible:!1}},computed:{dialogWidth(){return this.isMobileView?"75%":"25%"},isMobileView(){return"xs"===this.$vuetify.breakpoint.name}},methods:{closeDialog(){this.visible=!1,this.details&&this.details.triggerButtonAction()},showDialog(e){this.details=e,this.visible=!0}}},C=D,_=Object(b["a"])(C,x,S,!1,null,null,null),k=_.exports;class A{constructor(e,t,n,a){this.title=e,this.description=t,this.buttonAction=a,this.buttonText=n}triggerButtonAction(){this.buttonAction&&"function"===typeof this.buttonAction&&this.buttonAction()}}var O=n("9ae0"),V=n.n(O);const E=new Audio(V.a);var L={name:"Scanner",components:{CameraCodeScanner:y,ErrorDialog:k},props:{camera:null},data(){return{isLoaded:!1,cameraAvailable:null,cameraEnabled:null,videoDevices:null,scannedVal:null}},async created(){this.cameraAvailable=await this.isCameraAvailable(),this.cameraEnabled=this.cameraAvailable?await this.isCameraEnabled():null},methods:{onLoad(e,t,n){this.isLoaded=!0,console.log("---------------- ON-LOAD --------------"),console.log(e),console.log(t),console.log(n)},onScan(e){e!==this.scannedVal&&(E.play(),this.scannedVal=e,this.$emit("scan",e))},async isCameraAvailable(){try{var e;const t=await(null===(e=navigator.mediaDevices)||void 0===e?void 0:e.enumerateDevices());return!!(t&&(this.videoDevices=t.filter(e=>"videoinput"===e.kind),this.videoDevices.forEach(e=>console.log(e)),this.videoDevices.length>0))||(console.log("camera not available"),!1)}catch(t){return console.error(t),!1}},async isCameraEnabled(){try{var e;const t=await(null===(e=navigator.permissions)||void 0===e?void 0:e.query({name:"camera"}));return console.log("camera permission: "+(null===t||void 0===t?void 0:t.state)),t&&"denied"!==t.state}catch(t){return console.error(t),!0}}},watch:{cameraAvailable(e){if(document.body.style.cursor="default",!e){const e=new A("Eroare","Nu exista Camera","Inchide",()=>{this.$emit("denied")});this.$refs.errorDialog.showDialog(e)}},cameraEnabled(e){if(document.body.style.cursor="default",!e){const e=new A("Eroare","Accesul la camera este interzis","Inchide",()=>{this.$emit("denied")});this.$refs.errorDialog.showDialog(e)}}}},T=L,$=Object(b["a"])(T,d,u,!1,null,"5b3e11a6",null),j=$.exports,M=function(){var e=this,t=e._self._c;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"}},[t("path",{attrs:{fill:"currentColor",d:"M170.666667 256h85.333333v512H170.666667V256m128 0h42.666666v512H298.666667V256m85.333333 0h128v512H384V256m170.666667 0h42.666666v512h-42.666666V256m128 0h85.333333v512h-85.333333V256m128 0h42.666666v512h-42.666666V256M85.333333 170.666667v170.666666H0V170.666667a85.333333 85.333333 0 0 1 85.333333-85.333334h170.666667v85.333334H85.333333m853.333334-85.333334a85.333333 85.333333 0 0 1 85.333333 85.333334v170.666666h-85.333333V170.666667h-170.666667V85.333333h170.666667M85.333333 682.666667v170.666666h170.666667v85.333334H85.333333a85.333333 85.333333 0 0 1-85.333333-85.333334v-170.666666h85.333333m853.333334 170.666666v-170.666666h85.333333v170.666666a85.333333 85.333333 0 0 1-85.333333 85.333334h-170.666667v-85.333334h170.666667z"}})])},P=[],I={},H=Object(b["a"])(I,M,P,!1,null,null,null),B=H.exports,N=function(){var e=this,t=e._self._c;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"}},[t("path",{attrs:{fill:"currentColor",d:"M170.666667 256h85.333333v512H170.666667V256m128 0h42.666666v512H298.666667V256m85.333333 0h128v512H384V256m170.666667 0h42.666666v512h-42.666666V256m128 0h85.333333v512h-85.333333V256m128 0h42.666666v512h-42.666666V256M85.333333 170.666667v170.666666H0V170.666667a85.333333 85.333333 0 0 1 85.333333-85.333334h170.666667v85.333334H85.333333m853.333334-85.333334a85.333333 85.333333 0 0 1 85.333333 85.333334v170.666666h-85.333333V170.666667h-170.666667V85.333333h170.666667M85.333333 682.666667v170.666666h170.666667v85.333334H85.333333a85.333333 85.333333 0 0 1-85.333333-85.333334v-170.666666h85.333333m853.333334 170.666666v-170.666666h85.333333v170.666666a85.333333 85.333333 0 0 1-85.333333 85.333334h-170.666667v-85.333334h170.666667z"}}),t("path",{attrs:{d:"M 10,10 L 1010,1010",stroke:"red","stroke-width":"150"}})])},U=[],W={},F=Object(b["a"])(W,N,U,!1,null,null,null),G=F.exports,K={name:"ScannerPanel",components:{OpenScannerIcon:B,CloseScannerIcon:G,Scanner:j},data(){return{openScanner:!1,videoDevices:[],selectedVideoDevice:null}},async created(){await this.getVideoDevices()},methods:{scan(e){this.$emit("scan",e)},onOpenScannerClick(){this.openScanner=!this.openScanner},async getVideoDevices(){var e;const t=await(null===(e=navigator.mediaDevices)||void 0===e?void 0:e.enumerateDevices());t&&(this.videoDevices=t.filter(e=>"videoinput"===e.kind),console.log(this.videoDevices))}}},z=K,R=(n("99c8"),Object(b["a"])(z,c,l,!1,null,"310c55a6",null)),q=R.exports,J={name:"Search",components:{ScannerPanel:q},data(){return{valid:!0,searchText:"",savedOnKeyDown:null}},mounted(){this.savedOnKeyDown=document.onkeydown,document.onkeydown=this.focusOnKeyDown},beforeRouteLeave(e,t,n){document.onkeydown=this.savedOnKeyDown,n()},methods:{isMobile(){return/Android|iPhone/i.test(navigator.userAgent)},search(){this.$refs.searchSpan.innerHTML="CAUT: "+this.searchText},scan(e){e&&(this.searchText=e)},focusOnKeyDown(){this.$refs.inputText&&this.$refs.inputText.focus()}}},Q=J,X=(n("0787"),Object(b["a"])(Q,s,r,!1,null,"db7b5662",null)),Y=X.exports,Z=function(){var e=this,t=e._self._c;return t("div",[t("v-overlay",{attrs:{value:e.updateExists}}),t("v-snackbar",{attrs:{value:e.updateExists,"multi-line":!0,timeout:-1,id:"update_snackbar",color:"#FDD835"},scopedSlots:e._u([{key:"action",fn:function({attrs:n}){return[t("v-btn",e._b({attrs:{color:"black",text:""},on:{click:e.refreshApp}},"v-btn",n,!1),[e._v(" Update ")])]}}])},[e._v(" An update is available ")])],1)},ee=[],te={name:"AppUpdateComponent",data(){return{refreshing:!1,registration:null,updateExists:!1}},created(){document.addEventListener("swUpdated",this.updateAvailable),navigator.serviceWorker.addEventListener("controllerchange",()=>{this.refreshing||(this.refreshing=!0,window.location.reload())})},methods:{updateAvailable(e){this.registration=e.detail,this.updateExists=!0},refreshApp(){this.updateExists=!1,this.registration&&this.registration.waiting&&this.registration.waiting.postMessage({type:"SKIP_WAITING"})}}},ne=te,ae=(n("3869"),Object(b["a"])(ne,Z,ee,!1,null,"5506616e",null)),ie=ae.exports,oe={name:"App",components:{Search:Y,AppUpdateComponent:ie}},se=oe,re=(n("ecd2"),Object(b["a"])(se,i,o,!1,null,null,null)),ce=re.exports,le=n("ce5b"),de=n.n(le);n("bf40");a["default"].use(de.a);var ue=new de.a({theme:{themes:{light:{primary:"#298dff",accent:"#298dff"}}}}),ve=(n("5363"),n("9483"));Object(ve["a"])("/scan2/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(e){console.log(`[${(new Date).toLocaleTimeString("en-GB")}]: Service worker has been registered.`),setInterval(()=>{console.log("Checking app for updates..."),e.update().then(e=>{var t,n;console.log(`[${(new Date).toLocaleTimeString("en-GB")}]: Service Worker updated to latest version.`);const a=null!==(t=e.installing)&&void 0!==t?t:e.waiting;null!==(n=e.waiting)&&void 0!==n&&n.state&&console.log(`[${(new Date).toLocaleTimeString("en-GB")}]: Waiting service worker state: ${e.waiting.state}`),"installed"===(null===a||void 0===a?void 0:a.state)?(console.log(`[${(new Date).toLocaleTimeString("en-GB")}]: Pending update found... Refresh the app to update`),document.dispatchEvent(new CustomEvent("swUpdated",{detail:e}))):console.log(`[${(new Date).toLocaleTimeString("en-GB")}]: No new service worker available`)}).catch(e=>console.log("Service Worker update failed!",e))},6e4)},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(e){console.log("New content is available; please refresh."),document.dispatchEvent(new CustomEvent("swUpdated",{detail:e}))},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),a["default"].config.productionTip=!1,new a["default"]({vuetify:ue,render:e=>e(ce)}).$mount("#app")},"57c0":function(e,t,n){},"6ecf":function(e,t,n){},"99c8":function(e,t,n){"use strict";n("4f0b")},"9ae0":function(e,t,n){e.exports=n.p+"media/beep.6bb58878.wav"},a093:function(e,t,n){},c1f1:function(e,t,n){},ecd2:function(e,t,n){"use strict";n("57c0")}});
//# sourceMappingURL=app.397f623d.js.map